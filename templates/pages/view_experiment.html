{% extends "_base.html" %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static "css/view_experiment.css" %}">
{% endblock %}

{% block content %}
    {% if user.is_authenticated %}

{#    <div class="row justify-content-center">#}
{#        <table id="stims" align="center">#}
{#            <tr class="header">#}
{#                <th>Stimulus Sets</th>#}
{#            </tr>#}
{#            {% for stimset in stimsets %}#}
{#                {% if stimset.user.id == user.id %}#}
{#                    <tr>#}
{#                        <td><button class="btn" onclick="loadStimset({{ stimset.stimsetid }})">{{ stimset.stimsetname }}</button></td>#}
{#                    </tr>#}
{#                {% endif %}#}
{#            {% endfor %}#}
{#        </table>#}
{#        <table id="boards" align="center">#}
{#            <tr class="header">#}
{#                <th>Boards</th>#}
{#            </tr>#}
{#            <!--FILL IN THE TABLE WITH RESULTS FROM THE DATABASE-->#}
{#            {% for board in boards %}#}
{#                {% if board.user_id == user.id %}#}
{#                    <tr>#}
{#                        <td><button class="btn" onclick="loadBoard({{ board.boardid }})">{{ board.boardname }}</button></td>#}
{#                    </tr>#}
{#                {% endif %}#}
{#            {% endfor %}#}
{#            <!--End fill in the table with results from the database-->#}
{#        </table>#}
{#    </div>#}
{#    <hr>#}
    <div class="row justify-content-center">
        <table id="stimTable">
            <tr class="header">
                <th>Stimuli</th>
            </tr>
        </table>
        <div id="ThreeJSBoard"></div>
        <script src="{% static "js/createBoard.js" %}"></script>
    </div>
        <input class="btn btn-primary" type="button" id="submitExperiment" value="Submit" onclick="location.href=
                '{% url 'experiment' %}'"  />

    <input type="hidden" id="BoardRvalue">
    <input type="hidden" id="BoardGvalue">
    <input type="hidden" id="BoardBvalue">
    <input type="hidden" id="BackgroundRvalue">
    <input type="hidden" id="BackgroundGvalue">
    <input type="hidden" id="BackgroundBvalue">

    <script>
        function loadBoard(boardID) {
            // Set board colors to hidden inputs
            {% for board in boards %}
                if (boardID == {{ board.boardid }}) {
                    $("#BoardRvalue").val({{ board.boardr }});
                    $("#BoardGvalue").val({{ board.boardg }});
                    $("#BoardBvalue").val({{ board.boardb }});
                    $("#BackgroundRvalue").val({{ board.boardbackgroundr }});
                    $("#BackgroundGvalue").val({{ board.boardbackgroundg }});
                    $("#BackgroundBvalue").val({{ board.boardbackgroundb }});
                }
            {% endfor %}
            // Change board colors based on hidden inputs
            setBoardRGB();
            setBackgroundRGB();
        }

        function loadStimset(stimsetID) {
            // Reset the table
            $("#stimTable").html("<tr class='header'><th>Stimuli</th></tr>");
            // Add stims from stimset to table
            {% for stimulus in stimuli %}
                if (stimsetID == {{ stimulus.stimsetid_id }}) {
                    $("#stimTable").append("<tr><td><button class='btn' style='background-color:inherit;' onclick='stimToBoard(this, {{ stimulus.stimr }}, {{ stimulus.stimg }}, {{ stimulus.stimb }}, \"{{ stimulus.stimshape }}\")'>{{ stimulus.stimlabel }}</button></td></tr>");
                }
            {% endfor %}
        }
    </script>
    {% endif %}
{#    <div class="row">#}
{##}
{#        <div class="col">#}
{#            <table id="myTable" align="center" style="display: block; overflow-y: scroll">#}
{#                <tr class="header">#}
{#                    <th>Your Stimuli</th>#}
{#                </tr>#}
{#                <!--FILL IN THE TABLE WITH RESULTS FROM THE DATABASE-->#}
{#                <tr>#}
{#                    <td>#}
{#                        <button class="Stimulus 1" onclick="stimToBoard(this)">Stim</button>#}
{#                    </td>#}
{#                </tr>#}
{#                <tr>#}
{#                    <td><a href="#">Stimulus 2</a></td>#}
{#                </tr>#}
{#                <tr>#}
{#                    <td><a href="#">Stimulus 3</a></td>#}
{#                </tr>#}
{#                <!--FILL IN THE TABLE WITH RESULTS FROM THE DATABASE-->#}
{#            </table>#}
{#        </div>#}
{##}
{#        <div class="col">#}
{#            <div id="ThreeJSBoard"></div>#}
{#        </div>#}
{##}
{#    </div>#}
{#    <script src="{% static "js/createBoard.js" %}"></script>#}
{##}
{##}
{#    <script src="{% static "js/rbgValueGenerator.js" %}"></script>#}


{% endblock %}